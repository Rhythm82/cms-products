(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[309],{629:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var a=s(7876),r=s(8230),l=s.n(r),d=s(7546);function n(){return(0,a.jsxs)("nav",{className:"relative flex justify-between items-center px-8 py-4 bg-white/10 backdrop-blur-xl border-b border-white/20 shadow-lg",children:[(0,a.jsx)(l(),{href:"/",children:(0,a.jsx)("h1",{className:"text-2xl font-bold text-white drop-shadow-md hover:text-gray-300 transition",children:"My CMS"})}),(0,a.jsxs)(d.P.button,{whileHover:{scale:1.05},className:"relative px-5 py-2 rounded-xl text-white font-semibold    bg-purple-400/30 hover:bg-purple-600/50 from-cyan-500/40 to-blue-500/40    backdrop-blur-lg border border-white/20 shadow-md cursor-pointer   overflow-hidden",children:[(0,a.jsx)(l(),{href:"/admin",children:(0,a.jsx)("span",{className:"relative z-10 ",children:"Admin Panel"})}),(0,a.jsx)(d.P.span,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent skew-x-12",initial:{x:"-100%"},animate:{x:"100%"},transition:{repeat:1/0,duration:1,ease:"linear"}})]})]})}},757:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(2357)}])},2357:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(7876),r=s(4232),l=s(9099),d=s(1040),n=s(8230),i=s.n(n),o=s(7546),c=s(629);function x(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(null),x=(0,l.useRouter)();(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await d.A.get("http://localhost:5000/api/products");t(e.data)}catch(e){console.error("Error fetching products:",e)}},h=async(t,s)=>{try{let a=e.find(e=>e.product_id===t);await d.A.put("http://localhost:5000/api/products/".concat(t),{...a,status:"Published"===s?"Draft":"Published",updated_by:"admin"}),u()}catch(e){var a;console.error("Error updating product:",(null==(a=e.response)?void 0:a.data)||e.message)}},p=async e=>{try{await d.A.delete("http://localhost:5000/api/products/".concat(e),{data:{updated_by:"admin"}}),n(null),u()}catch(e){console.error("Error deleting product:",e)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{}),(0,a.jsxs)("div",{className:"min-h-screen from-purple-900 via-indigo-900 to-black p-10",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-10",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Admin Panel"}),(0,a.jsx)(i(),{href:"/admin/new",children:(0,a.jsx)(o.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 rounded-xl bg-green-600 text-white font-semibold shadow-md",children:"+ New Product"})})]}),(0,a.jsx)("div",{className:"grid gap-8",children:e.map(e=>(0,a.jsxs)(o.P.div,{whileHover:{scale:1.01},className:"glass p-6 rounded-2xl shadow-xl flex flex-col md:flex-row md:justify-between md:items-start gap-6 ".concat(e.is_deleted?"opacity-50 pointer-events-none":""),children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-white mb-3",children:e.product_name}),(0,a.jsx)("p",{className:"text-slate-200 text-m mb-5",children:e.product_desc}),(0,a.jsxs)("div",{className:"space-y-1 text-sm text-slate-300",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-bold",children:"Created:"})," ",new Date(e.created_at).toLocaleString()," by ",e.created_by]}),e.updated_at&&(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-bold",children:"Updated:"})," ",new Date(e.updated_at).toLocaleString()," by"," ",e.updated_by||"N/A"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{className:"font-bold",children:"Status:"})," ",e.is_deleted?(0,a.jsx)("span",{className:"text-red-400",children:"Deleted"}):(0,a.jsx)("span",{className:"".concat("Published"===e.status?"text-green-400":"text-yellow-400"),children:e.status})]})]})]}),!e.is_deleted&&(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:w-48",children:[(0,a.jsxs)("div",{onClick:()=>h(e.product_id,e.status),className:"relative w-full h-10 rounded-full cursor-pointer bg-blue-300/10 border border-blue-600/60 flex items-center",children:[(0,a.jsx)(o.P.div,{animate:{x:"Published"===e.status?"100%":"0%"},transition:{type:"spring",stiffness:200,damping:20},className:"absolute top-0 left-0 w-1/2 h-full bg-blue-600/60 rounded-full"}),(0,a.jsx)("div",{className:"w-1/2 text-center text-sm text-white font-semibold z-10",children:"Draft"}),(0,a.jsx)("div",{className:"w-1/2 text-center text-sm text-white font-semibold z-10",children:"Published"})]}),(0,a.jsxs)(o.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>x.push("/admin/".concat(e.product_id)),className:"px-4 py-2 rounded-xl relative overflow-hidden bg-blue/10 backdrop-blur-lg border border-white/20 text-white font-semibold shadow-md transition-all",children:[(0,a.jsx)("span",{className:"relative z-10",children:"Edit"}),(0,a.jsx)("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-500 via-green-500 to-green-500 animate-shine opacity-30"})]}),(0,a.jsx)(o.P.button,{whileHover:{scale:1.05},onClick:()=>n(e.product_id),className:"px-4 py-2 rounded-xl bg-red-500/70 border text-gray-100 border-red-400/40 w-full cursor-pointer ",children:"Delete"})]})]},e.product_id))}),s&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/60 flex justify-center items-center z-50",children:(0,a.jsxs)(o.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"glass p-8 rounded-2xl max-w-md w-full text-center",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Confirm Deletion"}),(0,a.jsx)("p",{className:"text-slate-300 mb-6",children:"Are you sure you want to delete this product?"}),(0,a.jsxs)("div",{className:"flex justify-center gap-6",children:[(0,a.jsx)("button",{onClick:()=>n(null),className:"px-6 py-2 rounded-xl bg-slate-600/30 text-white border border-slate-500/40 cursor-pointer",children:"Cancel"}),(0,a.jsx)("button",{onClick:()=>p(s),className:"px-6 py-2 rounded-xl bg-red-600/50 text-red-200 border border-red-400/40 cursor-pointer",children:"Continue"})]})]})})]})]})}},9099:(e,t,s)=>{e.exports=s(6296)}},e=>{e.O(0,[460,636,593,792],()=>e(e.s=757)),_N_E=e.O()}]);